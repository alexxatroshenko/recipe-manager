<app-about></app-about>

<div class="container mx-auto px-4 py-8">
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
    <mat-card
      *ngFor="let recipe of paginatedRecipes"
      class="overflow-hidden"
    >
      <!-- Recipe Image with Icon -->
      <div class="relative h-60 bg-gray-200 flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
          <g fill="currentColor" fill-rule="evenodd" clip-rule="evenodd">
            <path
              d="m31.228 4l-1.21 4.64l.068-1.01L24 10.541V6.648L17 8.79v3.62l-1.77-6.603l-5.602 5.237l2.44 9.103c.115.06.223.137.317.228c.83.803 1.629 1.532 2.4 2.189l-2.914-10.879l2.29-2.14l2.84 10.587v4.161c.683.482 1.348.9 2 1.25V10.27l3-.917V26.72c.759.178 1.51.259 2.261.241l1.006-14.81l2.59-1.24l-1.061 15.624a12.88 12.88 0 0 0 2.467-1.082l2.327-8.687l2.84-.852l-1.96 7.312a43.481 43.481 0 0 0 2.724-2.435l2.147-8.014l-1.767.452L38.345 4zm4.428 2l-2.342 7.808l-2.762.706L32.772 6z" />
            <path
              d="M35.589 23.169c-3.952 3.63-7.601 5.802-11.543 5.796c-3.944-.006-7.625-2.194-11.638-5.828L14.766 42h18.469zM11.469 20c-.78 0-1.383.684-1.287 1.458l2.6 20.79A2 2 0 0 0 14.765 44h18.469a2 2 0 0 0 1.984-1.752l2.6-20.795a1.293 1.293 0 0 0-2.204-1.071c-8.94 8.796-14.159 8.76-23.23-.007A1.327 1.327 0 0 0 11.47 20" />
          </g>
        </svg>
      </div>

      <mat-card-content>
        <h2 class="text-lg mb-1 mt-1 truncate">{{ recipe.title }}</h2>

        <div class="overflow-hidden h-20">
            <span
              class=" text-xs"
            >
            {{ recipe.description }}
          </span>
        </div>

        <div class="flex flex-wrap gap-2">
          @for (tag of recipe.tags ; track $index) {
            <div
              class="py-0.5 px-1.5 text-xs rounded-full bg-primary-bg"
            >
            {{ tag }}
          </div>
          }
        </div>

        <div class="flex justify-between items-center">
          <div class="flex space-x-4">
            <span class="text-xs text-text/70">понравилось: {{ recipe.likes }}</span>
            <span class="text-xs text-text/70">комментариев: {{recipe.comments}}</span>
          </div>

          <button
            mat-icon-button
            (click)="toggleSave(recipe)"
            aria-label="Сохранить в избранное"
          >
            @if(recipe.isSaved){
              <span class="material-icons hover:text-primary">bookmark</span>
            }
            @else{
              <span class="material-icons hover:text-primary">bookmark_border</span>
            }
          </button>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Pagination -->
  <div class="flex justify-center mt-8">
    <mat-paginator
      [length]="totalRecipes"
      [pageSize]="pageSize"
      [pageSizeOptions]="[12, 24, 36]"
      (page)="onPageChange($event)"
      aria-label="Выбор страницы рецептов">
    </mat-paginator>
  </div>
</div>
